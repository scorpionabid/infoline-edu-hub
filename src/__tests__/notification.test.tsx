// import { render, screen, fireEvent, act } from '@testing-library/react';
// import Notification from '../components/ui/notification/Notification';
// import { vi } from 'vitest';

// describe('Notification Component', () => {
//   it('should display a notification message', () => {
//     const message = 'This is a test notification';
//     render(<Notification message={message} />);
//     expect(screen.getByText(message)).toBeInTheDocument();
//   });

//   it('should display different types of notifications', () => {
//     const successMessage = 'Success notification';
//     const errorMessage = 'Error notification';

//     const { container } = render(
//       <>
//         <Notification message={successMessage} type="success" />
//         <Notification message={errorMessage} type="error" />
//       </>
//     );

//     const successElement = screen.getByText(successMessage).parentElement;
//     const errorElement = screen.getByText(errorMessage).parentElement;

//     expect(successElement).toHaveClass('bg-green-100');
//     expect(errorElement).toHaveClass('bg-red-100');
//   });

//   it('should handle closing the notification', () => {
//     const message = 'This is a closable notification';
//     const onClose = vi.fn();

//     render(<Notification message={message} onClose={onClose} autoClose={false} />);
    
//     const closeButton = screen.getByRole('button', { name: /close notification/i });
//     fireEvent.click(closeButton);

//     expect(onClose).toHaveBeenCalled();
//   });

//   it('should auto-close after specified duration', async () => {
//     vi.useFakeTimers();
//     const message = 'Auto-closing notification';
//     const onClose = vi.fn();
//     const duration = 2000;

//     render(
//       <Notification 
//         message={message} 
//         onClose={onClose} 
//         autoClose={true} 
//         duration={duration} 
//       />
//     );

//     expect(screen.getByText(message)).toBeInTheDocument();
    
//     act(() => {
//       vi.advanceTimersByTime(duration);
//     });

//     expect(onClose).toHaveBeenCalled();
//     vi.useRealTimers();
//   });
// });

// import { render, screen, fireEvent, waitFor } from '@testing-library/react';
// import { vi, describe, it, expect, beforeEach } from 'vitest';
// import { createTestWrapper } from '../setupTests';
// import { MemoryRouter } from 'react-router-dom';
// import NotificationSystem from '../components/ui/notification/NotificationSystem';
// import { NotificationProvider } from '../context/NotificationContext';
// import { AuthProvider } from '../context/AuthContext';

// describe('Edge Cases in Notification System', () => {
//   beforeEach(() => {
//     vi.clearAllMocks();
//   });

//   describe('BildiriÅŸ limitlÉ™ri', () => {
//     it('Ã§oxsaylÄ± bildiriÅŸlÉ™r', async () => {
//       const notifications = Array(100).fill(null).map((_, index) => ({
//         id: `notification-${index}`,
//         message: `Test Message ${index}`,
//         type: 'info',
//         timestamp: new Date().toISOString()
//       }));

//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider initialNotifications={notifications}>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       // Maksimum 5 bildiriÅŸ gÃ¶stÉ™rilmÉ™lidir
//       const displayedNotifications = screen.getAllByRole('alert');
//       expect(displayedNotifications).toHaveLength(5);
      
//       // "Daha Ã§ox" dÃ¼ymÉ™si gÃ¶stÉ™rilmÉ™lidir
//       expect(screen.getByText('95 bildiriÅŸ daha')).toBeInTheDocument();
//     });

//     it('eyni vaxtda gÉ™lÉ™n bildiriÅŸlÉ™r', async () => {
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       // Eyni vaxtda 10 bildiriÅŸ gÃ¶ndÉ™rÉ™k
//       const promises = Array(10).fill(null).map((_, index) => {
//         return new Promise(resolve => {
//           setTimeout(() => {
//             fireEvent(window, new CustomEvent('notification', {
//               detail: {
//                 message: `Test Message ${index}`,
//                 type: 'info'
//               }
//             }));
//             resolve(null);
//           }, 0);
//         });
//       });

//       await Promise.all(promises);

//       // BildiriÅŸlÉ™r nÃ¶vbÉ™yÉ™ alÄ±nmalÄ±dÄ±r
//       const displayedNotifications = screen.getAllByRole('alert');
//       expect(displayedNotifications).toHaveLength(5);
//     });
//   });

//   describe('BildiriÅŸ mÉ™zmunu', () => {
//     it('uzun mÉ™tnli bildiriÅŸ', async () => {
//       const longMessage = 'a'.repeat(1000);
      
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: longMessage,
//           type: 'info'
//         }
//       }));

//       const notification = screen.getByRole('alert');
//       expect(notification).toBeInTheDocument();
//       expect(notification).toHaveStyle({
//         maxWidth: '400px',
//         overflow: 'hidden'
//       });
//     });

//     it('HTML tÉ™rkibli bildiriÅŸ', async () => {
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: '<script>alert("test")</script><b>Bold Text</b>',
//           type: 'info'
//         }
//       }));

//       const notification = screen.getByRole('alert');
//       expect(notification).toHaveTextContent('<script>alert("test")</script><b>Bold Text</b>');
//       expect(notification.innerHTML).not.toContain('<script>');
//     });

//     it('emoji vÉ™ xÃ¼susi simvollar', async () => {
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'ðŸŽ‰ Test Message âœ¨ with special chars: Â©Â®â„¢',
//           type: 'info'
//         }
//       }));

//       const notification = screen.getByRole('alert');
//       expect(notification).toHaveTextContent('ðŸŽ‰ Test Message âœ¨ with special chars: Â©Â®â„¢');
//     });
//   });

//   describe('BildiriÅŸ davranÄ±ÅŸÄ±', () => {
//     it('avtomatik baÄŸlanma', async () => {
//       vi.useFakeTimers();

//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'Test Message',
//           type: 'info'
//         }
//       }));

//       expect(screen.getByRole('alert')).toBeInTheDocument();

//       // 5 saniyÉ™ gÃ¶zlÉ™yÉ™k
//       vi.advanceTimersByTime(5000);

//       await waitFor(() => {
//         expect(screen.queryByRole('alert')).not.toBeInTheDocument();
//       });

//       vi.useRealTimers();
//     });

//     it('manual baÄŸlama', async () => {
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'Test Message',
//           type: 'info'
//         }
//       }));

//       const closeButton = screen.getByLabelText('BaÄŸla');
//       fireEvent.click(closeButton);

//       await waitFor(() => {
//         expect(screen.queryByRole('alert')).not.toBeInTheDocument();
//       });
//     });

//     it('hover zamanÄ± avtomatik baÄŸlanmanÄ±n dayandÄ±rÄ±lmasÄ±', async () => {
//       vi.useFakeTimers();

//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'Test Message',
//           type: 'info'
//         }
//       }));

//       const notification = screen.getByRole('alert');
//       fireEvent.mouseEnter(notification);

//       // 10 saniyÉ™ gÃ¶zlÉ™yÉ™k
//       vi.advanceTimersByTime(10000);

//       // BildiriÅŸ hÉ™lÉ™ dÉ™ gÃ¶rÃ¼nmÉ™lidir
//       expect(notification).toBeInTheDocument();

//       // Mouse-u Ã§É™kdikdÉ™n sonra bildiriÅŸ baÄŸlanmalÄ±dÄ±r
//       fireEvent.mouseLeave(notification);
//       vi.advanceTimersByTime(5000);

//       await waitFor(() => {
//         expect(screen.queryByRole('alert')).not.toBeInTheDocument();
//       });

//       vi.useRealTimers();
//     });
//   });

//   describe('BildiriÅŸ nÃ¶vlÉ™ri', () => {
//     it('error bildiriÅŸinin xÃ¼susi stili', async () => {
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'Error Message',
//           type: 'error'
//         }
//       }));

//       const notification = screen.getByRole('alert');
//       expect(notification).toHaveClass('error');
//       expect(notification).toHaveStyle({
//         backgroundColor: 'var(--error-bg)',
//         color: 'var(--error-text)'
//       });
//     });

//     it('success bildiriÅŸinin xÃ¼susi stili', async () => {
//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'Success Message',
//           type: 'success'
//         }
//       }));

//       const notification = screen.getByRole('alert');
//       expect(notification).toHaveClass('success');
//       expect(notification).toHaveStyle({
//         backgroundColor: 'var(--success-bg)',
//         color: 'var(--success-text)'
//       });
//     });
//   });

//   describe('Offline rejim', () => {
//     it('offline rejimdÉ™ bildiriÅŸlÉ™rin saxlanmasÄ±', async () => {
//       const mockOnline = vi.spyOn(navigator, 'onLine', 'get');
//       mockOnline.mockReturnValue(false);

//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       fireEvent(window, new CustomEvent('notification', {
//         detail: {
//           message: 'Offline Message',
//           type: 'info'
//         }
//       }));

//       // BildiriÅŸ localStorage-dÉ™ saxlanmalÄ±dÄ±r
//       const storedNotifications = JSON.parse(localStorage.getItem('notifications') || '[]');
//       expect(storedNotifications).toHaveLength(1);
//       expect(storedNotifications[0].message).toBe('Offline Message');

//       mockOnline.mockRestore();
//     });

//     it('online qayÄ±tdÄ±qda bildiriÅŸlÉ™rin sinxronizasiyasÄ±', async () => {
//       const mockOnline = vi.spyOn(navigator, 'onLine', 'get');
//       mockOnline.mockReturnValue(false);

//       // Offline bildiriÅŸlÉ™ri É™lavÉ™ edÉ™k
//       localStorage.setItem('notifications', JSON.stringify([
//         {
//           id: '1',
//           message: 'Offline Message 1',
//           type: 'info',
//           timestamp: new Date().toISOString()
//         },
//         {
//           id: '2',
//           message: 'Offline Message 2',
//           type: 'info',
//           timestamp: new Date().toISOString()
//         }
//       ]));

//       render(
//         <AuthProvider>
//           <MemoryRouter>
//             <NotificationProvider>
//               <NotificationSystem />
//             </NotificationProvider>
//           </MemoryRouter>
//         </AuthProvider>
//       );

//       // Online rejimÉ™ keÃ§É™k
//       mockOnline.mockReturnValue(true);
//       fireEvent(window, new Event('online'));

//       await waitFor(() => {
//         expect(screen.getByText('Offline Message 1')).toBeInTheDocument();
//         expect(screen.getByText('Offline Message 2')).toBeInTheDocument();
//       });

//       // LocalStorage tÉ™mizlÉ™nmÉ™lidir
//       expect(localStorage.getItem('notifications')).toBe('[]');

//       mockOnline.mockRestore();
//     });
//   });
// });